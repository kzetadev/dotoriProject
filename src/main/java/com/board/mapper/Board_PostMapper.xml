<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board_post">
 
	<!-- 게시글 목록 -->
	<select id="select" resultType="com.board.vo.Board_PostVo">
		SELECT b.board_no, b.board_kinds, h.head_tag_name, b.board_title, 
		m.mem_nickname, b.board_date, b.board_hit 
		FROM board_post b, member_info m, head_tag h
		WHERE b.mem_no = m.mem_no and b.head_tag_no = h.head_tag_no   
		order by b.board_no desc
	</select>

	<!-- 게시글 등록 -->
	<!-- CREATE SEQUENCE seq_board_no INCREMENT BY 1 START WITH 1 MINVALUE 1; -->
	<insert id="insert">
		insert into board_post values(seq_board_no.nextval, #{board_kinds}, #{head_tag_name}, #{board_title}, #{mem_nickname}, sysdate, 0, #{board_content}, #{board_copy})
	</insert>

	<!-- 게시글 상세 -->
	<select id="detail" resultType="com.board.vo.Board_PostVo">
		select board_title, board_date, board_content from board_post where board_no = #{board_no}
	</select>

	<!-- 게시글 수정 -->
	<update id="update">
		update board_post set board_kinds=#{board_kinds},
		board_title=#{board_title}, board_content=#{board_content},
		board_copy=#{board_copy}
		where board_no=#{board_no}
	</update>

	<!-- 게시글 삭제 -->
	<delete id="delete">
		delete from board_post where board_no=#{board_no}
	</delete>
	
	<!-- 게시글 조회수 증가 -->
	<update id="updateHit">
		update board_post set board_hit = board_hit + 1 where board_no = #{board_no}
	</update>
	
	<!-- 말머리 목록 -->
	<select id="selectHead_Tag" resultType="com.board.vo.Head_TagVo">
		select head_tag_no from head_tag
	</select>
</mapper>